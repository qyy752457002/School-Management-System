{
  "web_server": {
    "name": "school",
    "description": "学校综合管理系统",
    "version": "0.0.1"
  },
  "databases": {
    "default": {
      "async_driver": "kingbase+asyncpg",
      "sync_driver": "kingbase",
      "master": {
        "host": "10.0.0.42",
        "port": 54321,
        "user": "schooloms",
        "password": "J16s10Wp08yfEskmVAJH",
        "database": "school_oms_dev"
      },
      "slaves": [
        {
          "host": "10.0.0.42",
          "port": 54321,
          "user": "schooloms",
          "password": "J16s10Wp08yfEskmVAJH",
          "database": "school_oms_dev"
        },
        {
          "host": "10.0.0.42",
          "port": 54321,
          "user": "schooloms",
          "password": "J16s10Wp08yfEskmVAJH",
          "database": "school_oms_test"
        }
      ]
    }
  },
  "storage": {
    "endpoint": "minio.f123.pub",
    "access_key": "BeZHOqpqs4u5jjuv",
    "secret_key": "MtuM5ZBlARTQMqRsb6mGIMecPlJhCE2D",
    "token_exp_sec": 600,
    "buckets": {
      "student": {
        "name": "k8s",
        "path": "/student"
      },
      "school": {
        "name": "k8s",
        "path": "school"
      },
      "teacher": {
        "name": "k8s",
        "path": "/teacher"
      }
    }
  },
  "redis": {
    "servers": {
      "default": {
        "host": "10.0.5.25",
        "port": 6379,
        "password": ""
      }
    },
    "dbs": {
      "session": {
        "db": 20,
        "prefix": "",
        "server_key": "default"
      },
      "jwt_blacklist": {
        "db": 21,
        "prefix": "",
        "server_key": "default"
      },
      "snowflake": {"db": 0, "prefix": "", "server_key": "default"},
      "login_state": {
        "db": 22,
        "prefix": "",
        "server_key": "default"
      },
      "account": {
        "db": 3,
        "prefix": "",
        "server_key": "default"
      }
    }
  },
  "authentication": {
    "jwt": {
      "secret": "secret",
      "algorithm": "HS256",
      "expires": 3600,
      "issuer": "issuer",
      "audience": "audience",
      "issue_at": 0
    },
    "oauth2": {
      "client_id": "76889917407ad3916214",
      "client_secret": "11af0ae636c86d9f0a2d0355da0ed210ffc0c2b1",
      "authorization_url": "https://org-center.f123.pub/login/oauth/authorize",
      "token_url": "https://org-center.f123.pub/api/login/oauth/access_token",
      "user_info_url": "https://org-center.f123.pub/api/userinfo",
      "redirect_url": "http://localhost:8080/api/school/auth/callback/debug",
      "grant_type": "authorization_code",
      "scope": "scope",
      "cert": "cert",
      "home_url": "https://localhost/api/school/docs",
      "no_login_urls": [
        "/api/school/openapi.json",
        "/api/school/v1/public",
        "/api/school/docs"
      ]
    }
  },
  "kafka": {
    "bootstrap_servers": [
      "10.0.9.4:9092",
      "10.0.9.5:9092",
      "10.0.9.6:9092"
    ],
    "auto_offset_reset": "earliest",
    "group_id": "test",
    "topics": {
      "account_create": {
        "partitions": 3,
        "replication_factor": 3
      },
      "account_export": {
        "partitions": 3,
        "replication_factor": 3
      }
    }
  },
  "workflow_service": {
    "name": "workflow_service",
    "description": "",
    "url": "http://127.0.0.1:8081"
  },
  "transaction_service": {
    "retry": {
      "max_attempts": 3,
      "delay": 1,
      "backoff": 2,
      "jitter": true
    },
    "workflow":  "fff.cc",
    "zookeeper_host":   "10.0.9.1:2181,10.0.9.2:2181,10.0.9.3:2181"
  },
  "task_service": {
    "app_id": "task_service",
    "retry": {
      "max_attempts": 3,
      "delay": 1,
      "backoff": 2,
      "jitter": true
    },
    "alert": {
      "email_from": "",
      "email_to": [],
      "email_smtp_server": "",
      "email_smtp_port": 25,
      "sms_api_endpoint": "",
      "sms_api_key": ""
    },
    "task_types": {
      "institution_import": {
        "topic": "institution_import",
        "name": "",
        "consumer_group_id": "service",
        "description": "事业单位导入任务",
        "executor_cls_model": "views.tasks.institution_task.InstitutionExecutor",
        "payload_cls_model": "views.models.institutions.InstitutionTask"
      },
      "institution_export": {
        "topic": "institution_export",
        "name": "事业单位导出",
        "consumer_group_id": "service",
        "description": "institution_export",
        "executor_cls_model": "views.tasks.institution_task.InstitutionExportExecutor",
        "payload_cls_model": "views.models.institutions.InstitutionPageSearch",
        "payload_is_list": false
      },

      "new_student_import": {
        "topic": "new_student_import",
        "name": "新生导入",
        "consumer_group_id": "service",
        "description": "",
        "executor_cls_model": "views.tasks.new_student_task.NewStudentExecutor",
        "payload_cls_model": "views.models.students.NewStudentTask"
      },
      "school_import": {
        "topic": "school_import",
        "name": "学校导入",
        "consumer_group_id": "service",
        "description": "",
        "executor_cls_model": "views.tasks.school_task.SchoolExecutor",
        "payload_cls_model": "views.models.school.SchoolTask"
      },
      "school_export": {
        "topic": "school_export",
        "name": "学校导出",
        "consumer_group_id": "service",
        "description": "school_export",
        "executor_cls_model": "views.tasks.school_task.SchoolExportExecutor",
        "payload_cls_model": "views.models.school.SchoolPageSearch",
        "payload_is_list": false
      },
      "planning_school_import": {
        "topic": "planning_school_import",
        "name": "规划校上传和导入",
        "consumer_group_id": "service",
        "description": "",
        "executor_cls_model": "views.tasks.planning_school_task.PlanningSchoolExecutor",
        "payload_cls_model": "views.models.planning_school.PlanningSchoolTask"
      },
      "planning_school_export": {
        "topic": "planning_school_export",
        "name": "规划校的导出",
        "consumer_group_id": "service",
        "description": "planning_school_export",
        "executor_cls_model": "views.tasks.planning_school_task.PlanningSchoolExportExecutor",
        "payload_cls_model": "views.models.planning_school.PlanningSchoolPageSearch",
        "payload_is_list": false
      },
      "student_export": {
        "topic": "student_export",
        "name": "学生导出",
        "consumer_group_id": "service",
        "description": "学生导出",
        "executor_cls_model": "views.tasks.new_student_task.NewStudentExportExecutor",
        "payload_cls_model": "views.models.students.NewStudentsQuery"
      },
      "newstudent_classdivision_export": {
        "topic": "newstudent_classdivision_export",
        "name": "学生分班记录导出",
        "consumer_group_id": "service",
        "description": "学生分班记录导出",
        "executor_cls_model": "views.tasks.newstudent_classdivision_task.NewStudentClassDivisionExportExecutor",
        "payload_cls_model": "views.models.class_division_records.ClassDivisionRecordsSearchRes"
      },
      "teacher_import": {
        "topic": "teacher_import",
        "name": "教师导入",
        "consumer_group_id": "service",
        "description": "教师导入",
        "executor_cls_model": "views.tasks.new_teacher_task.TeacherImportExecutor",
        "payload_cls_model": "views.models.teachers.TeacherFileStorageModel"
      },
      "teacher_export": {
        "topic": "teacher_export",
        "name": "教师导出",
        "consumer_group_id": "service",
        "description": "教师导出",
        "executor_cls_model": "views.tasks.new_teacher_task.TeacherExportExecutor",
        "payload_cls_model": "views.models.teachers.CurrentTeacherQuery"
      },
      "teacher_save_export": {
        "topic": "teacher_export",
        "name": "",
        "consumer_group_id": "service",
        "description": "",
        "executor_cls_model": "views.tasks.new_teacher_task.TeacherSaveExportExecutor",
        "payload_cls_model": "views.models.teachers.TeacherFileStorageModel"
      }
    }
  }
}